{"version":3,"file":"preview-9944460d.js","sources":["../../../../node_modules/@nuxt/content/dist/runtime/composables/preview.mjs"],"sourcesContent":["import { useCookie, useRoute } from \"#imports\";\nlet showWarning = true;\nexport const useContentPreview = () => {\n  const getPreviewToken = () => {\n    return useCookie(\"previewToken\").value || process.client && sessionStorage.getItem(\"previewToken\") || void 0;\n  };\n  const setPreviewToken = (token) => {\n    useCookie(\"previewToken\").value = token;\n    useRoute().query.preview = token || \"\";\n    if (process.client) {\n      if (token) {\n        sessionStorage.setItem(\"previewToken\", token);\n      } else {\n        sessionStorage.removeItem(\"previewToken\");\n      }\n      window.location.reload();\n    }\n  };\n  const isEnabled = () => {\n    const query = useRoute().query;\n    if (Object.prototype.hasOwnProperty.call(query, \"preview\") && !query.preview) {\n      return false;\n    }\n    if (query.preview || useCookie(\"previewToken\").value) {\n      if (process.dev && showWarning) {\n        console.warn(\"[content] Client DB enabled since a preview token is set (either in query or cookie).\");\n        showWarning = false;\n      }\n      return true;\n    }\n    if (process.client && sessionStorage.getItem(\"previewToken\")) {\n      return true;\n    }\n    return false;\n  };\n  return {\n    isEnabled,\n    getPreviewToken,\n    setPreviewToken\n  };\n};\n"],"names":[],"mappings":";;;;;AAEY,MAAC,oBAAoB,MAAM;AACrC,QAAM,kBAAkB,MAAM;AAC5B,WAAO,UAAU,cAAc,EAAE,SAAS,SAA4D;AAAA,EAC1G;AACE,QAAM,kBAAkB,CAAC,UAAU;AACjC,cAAU,cAAc,EAAE,QAAQ;AAClC,aAAU,EAAC,MAAM,UAAU,SAAS;AAAA,EASxC;AACE,QAAM,YAAY,MAAM;AACtB,UAAM,QAAQ,SAAU,EAAC;AACzB,QAAI,OAAO,UAAU,eAAe,KAAK,OAAO,SAAS,KAAK,CAAC,MAAM,SAAS;AAC5E,aAAO;AAAA,IACR;AACD,QAAI,MAAM,WAAW,UAAU,cAAc,EAAE,OAAO;AAKpD,aAAO;AAAA,IACR;AAID,WAAO;AAAA,EACX;AACE,SAAO;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,EACJ;AACA;","x_google_ignoreList":[0]}